
<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en" lang="en-us">
<head>
   <meta http-equiv="content-type" content="text/html; charset=utf-8" />
   <title>Ryan Regalado</title>
   <meta name="description" content="Ryan Regalado Website Developer / User Interface Designer" />
   <meta name="author" content="Ryan Regalado" />
   <link rel="shortcut icon" href="http://www.design48.net/images/favicon.ico" />
   <link href="http://feeds.feedburner.com/" rel="alternate" title="your title" type="application/atom+xml" />

   <!-- syntax highlighting CSS -->
   <!-- <link rel="stylesheet" href="/assets/themes/tom/css/pygments-monokai.css" type="text/css" /> -->
   <link rel="stylesheet" href="/assets/themes/tom/css/pygments-blackboard.css" type="text/css" />
   <!-- <link rel="stylesheet" href="/assets/themes/tom/css/pygments-github.css" type="text/css" /> -->

   <!-- Homepage CSS -->
   <link rel="stylesheet" href="/assets/themes/tom/css/screen.css" type="text/css" media="screen, projection" />
   <link href='http://fonts.googleapis.com/css?family=Open+Sans:400italic,600italic,700italic,400,300,600,700' rel='stylesheet' type='text/css' />

  <script type="text/javascript" src="/assets/themes/tom/js/jquery.min.js"></script>
  <script type="text/javascript" src="/assets/themes/tom/js/md5.js"></script>
  <script type="text/javascript" src="/assets/themes/tom/js/jquery.gravatar.js"></script>

</head>
<body>

    <div id="header">
        <a href="/" id="gravatar"></a>
        <script>
            $("#gravatar").fadeIn(900).html($.gravatar('ryan@design48.net'));
        </script>

        <h1 id="site-title"><a href="/">Ryan Regalado</a></h1>

        <span class="blog-description">Website Developer / User Interface Designer</span>

        <div class="title" id="menu">
            <a class="extra" href="/pages/about.html">About</a>
            <a class="extra" href="/archive.html">Archive</a>
        </div>

      <ul class="contact">
          <li><a href="http://github.com/d48/" target="_blank">d48@github</a></li>
          <li><a href="http://twitter.com/design48/" target="_blank">@design48</a></li>
      </ul>

    </div>

  <div class="site">
    
<div id="post">
    <div class="post">
        




<div class="post">
    <div class="content">
        <div class="title"><h3><a href="/2012/12/16/nodejs-todos-with-multiple-lists">node.js todos with multiple lists</a></h3></div>

        <div class="meta">
            <span class="date">Dec 16, 2012</span>
        </div>

        <div class="body-post">
            
                <h1 id='some_progress'>Some progress</h1>

<p>So I&#8217;ve been doing some testing on the json structure for enabling multiple lists on the todo cli tool that I&#8217;ve been hacking away at. There&#8217;s two components to get this working;</p>

<p><strong>One</strong></p>

<p>Have a nested object with arrays so can iterate through list names and each lists&#8217;s todo items:</p>

<p><img alt='json sample' src='http://content.screencast.com/users/User48/folders/Jing/media/086178f4-48e4-441f-8204-b41b5db9cfc1/00000101.png' /></p>

<p><strong>Two</strong></p>

<p>Having a persitent data store to get the selected list name so as to apply actions to. Since there is no sense of state in a node.js cli app we need to create one.</p>

<p>We are already saving a list of todo items in a json file, we can save this hash of what the <code>current</code> list is in the same or separate file. I didn&#8217;t want to pollute this existing json file storage of todos so I decided to place it in a separate file.</p>

<p>Now when we return back to our todo app to run commands on it, a sense of <code>state</code> has been established by pulling this name from the file, and then we can resume with our actions of listing, adding, or removing items from the main data store with this saved name as the key, yeehaw.</p>

<p><strong>Commands</strong></p>

<p>The command I want to set up would then look like this:</p>
<div class='highlight'><pre><code class='js'><span class='nx'>$</span> <span class='nx'>todo</span> <span class='nx'>show</span> <span class='nx'>lists</span>

<span class='c1'>// returns</span>
	<span class='err'>#</span><span class='mi'>1</span><span class='o'>:</span> <span class='nx'>work</span>
	<span class='err'>#</span><span class='mi'>2</span><span class='o'>:</span> <span class='nx'>groceries</span>
	<span class='err'>#</span><span class='mi'>3</span><span class='o'>:</span> <span class='nx'>inventions</span>

<span class='nx'>$</span> <span class='nx'>todo</span> <span class='nx'>select</span> <span class='mi'>2</span>

<span class='c1'>// returns</span>
	<span class='s1'>&#39;groceries&#39;</span> <span class='nx'>list</span> <span class='nx'>selected</span><span class='p'>.</span> <span class='nx'>Ready</span> <span class='k'>for</span> <span class='nx'>actions</span>

<span class='nx'>$</span> <span class='nx'>todo</span> <span class='nx'>add</span> <span class='s2'>&quot;get plums&quot;</span>

<span class='c1'>// #1 already existed, so returns</span>

	<span class='err'>#</span><span class='mi'>1</span><span class='o'>:</span> <span class='nx'>bananas</span>
	<span class='err'>#</span><span class='mi'>2</span><span class='o'>:</span> <span class='nx'>get</span> <span class='nx'>plums</span>
</code></pre>
</div>
<h1 id='note'>Note</h1>

<p>This is still a work in progress but I&#8217;m making small steps to finally get my own todos working at the command line the way I like it.</p>

<p><a href='https://github.com/design48/todo/commit/94291cd86a52dc8f31d8c5732e882d5d9f7b2ea5'>Some code for the work in progress</a></p>
            

            <!-- if tags -->
            
            <ul class="tags">
                 
                <li><a href="/tags/node.js">node.js</a></li>
                 
                <li><a href="/tags/js">js</a></li>
                 
                <li><a href="/tags/javascript">javascript</a></li>
                 
                <li><a href="/tags/todos">todos</a></li>
                
            </ul>  
            
            <!-- endif -->
        </div><!--end body-->
    </div><!--end content-->
    <div class="clear"></div>
</div><!--end post-->




<div class="post">
    <div class="content">
        <div class="title"><h3><a href="/2012/12/12/mytestimony-and-mongodb-findone">mytestimony and mongodb findOne</a></h3></div>

        <div class="meta">
            <span class="date">Dec 12, 2012</span>
        </div>

        <div class="body-post">
            
                <p>Working with <strong>mongdob</strong> on the <a href='http://github.com/design48/mytestimony'>MyTestimony.com web project</a>, I had a chance to update the routes to include a user clicking on a <em>View</em> button to open a testimony page.</p>

<h1 id='mondodb_native_driver_api'>MondoDB native driver api</h1>

<p>The method to find a testimony with specific id is:</p>
<div class='highlight'><pre><code class='js'><span class='nx'>db</span><span class='p'>.</span><span class='nx'>collectionName</span><span class='p'>.</span><span class='nx'>findOne</span><span class='p'>({</span><span class='nx'>_id</span><span class='o'>:</span> <span class='k'>new</span> <span class='nx'>ObjectID</span><span class='p'>(</span><span class='s1'>&#39;generatedstring&#39;</span><span class='p'>)});</span>
</code></pre>
</div>
<h1 id='screenshots'>Screenshots</h1>

<p>This allowed me to have button for <em>View</em>:</p>

<p><img alt='button' src='http://f.cl.ly/items/0F0q3D0C0u1V3F0l3s0C/Screen%20Shot%202012-12-12%20at%2012.10.49%20AM.png' /></p>

<p>Click to open a testimony page:</p>

<p><img alt='detail' src='http://f.cl.ly/items/10413q2F37153b1H1M1h/Screen%20Shot%202012-12-12%20at%2012.11.37%20AM.png' /></p>
            

            <!-- if tags -->
            
            <ul class="tags">
                 
                <li><a href="/tags/mytestimony">mytestimony</a></li>
                 
                <li><a href="/tags/mongodb">mongodb</a></li>
                 
                <li><a href="/tags/findOne">findOne</a></li>
                 
                <li><a href="/tags/testimony">testimony</a></li>
                
            </ul>  
            
            <!-- endif -->
        </div><!--end body-->
    </div><!--end content-->
    <div class="clear"></div>
</div><!--end post-->




<div class="post">
    <div class="content">
        <div class="title"><h3><a href="/2012/12/11/updating-todo-with-event-emitter">Updating todo node.js library with event emitter</a></h3></div>

        <div class="meta">
            <span class="date">Dec 11, 2012</span>
        </div>

        <div class="body-post">
            
                <p>I recently updated a node.js library that allows you to create and manage a todo list at the command line or OSX terminal. This is handy especially when you&#8217;re programming within that environment and want to quickly make a note of an item you need <strong>todo</strong> of course.</p>

<p>I&#8217;m just getting to learn node.js and I needed a way to have a module update another module to do some functionality upon an &#8220;event&#8221;. Using the <a href='http://nodejs.org/api/events.html'>Event Emitter</a> class in node.js worked perfect.</p>

<p>So here&#8217;s the use case, I needed a way to always show the list of todo items upon an action like</p>

<ul>
<li>adding to the list</li>

<li>removing from the list</li>

<li>or clearing it out</li>
</ul>

<p>The original package didn&#8217;t have it, so I added it using a <strong>custom event</strong>. Upon a given user action, the object <strong>emits</strong> an event name to any object that is <strong>listening</strong>. Each listening object can define what they do upon the event being received. It just so happens I have my object list out all the todo items. Awesome.</p>

<p><img alt='show list upon each action' src='http://content.screencast.com/users/User48/folders/Jing/media/570d6898-8480-46b7-acda-2a182df2dba2/00000090.png' /></p>

<p>The <a href='https://github.com/design48/todo/commit/dec8347b2613979287042706bb05a8d940d5d52a'>source code highlighted</a> lists out the lines below it that were added</p>
            

            <!-- if tags -->
            
            <ul class="tags">
                 
                <li><a href="/tags/node.js">node.js</a></li>
                 
                <li><a href="/tags/todo">todo</a></li>
                 
                <li><a href="/tags/event">event</a></li>
                 
                <li><a href="/tags/emitter">emitter</a></li>
                 
                <li><a href="/tags/emit">emit</a></li>
                 
                <li><a href="/tags/javascript">javascript</a></li>
                
            </ul>  
            
            <!-- endif -->
        </div><!--end body-->
    </div><!--end content-->
    <div class="clear"></div>
</div><!--end post-->




<div class="post">
    <div class="content">
        <div class="title"><h3><a href="/2012/12/07/todo-list-at-the-command-line-with-nodejs">todo list at the command line with node.js</a></h3></div>

        <div class="meta">
            <span class="date">Dec  7, 2012</span>
        </div>

        <div class="body-post">
            
                <h1 id='some_progress'>Some progress</h1>

<p>I&#8217;ve been making more progress on modifying the todo list app made from this githubber: <a href='https://github.com/vesln/todo'>https://github.com/vesln/todo</a></p>

<p>Initially they set it up to only be one list. I&#8217;m changing it so it can have multiple lists that you can add to, check off, rename, and delete easily.</p>

<p><img alt='todo list cli tool' src='http://content.screencast.com/users/User48/folders/Jing/media/a8663943-fb10-4e79-9a3c-f438f759e9ed/00000085.png' /></p>

<p>Next on my list is to sort out how I want my api to be to this command line tool. I&#8217;m having fun sorting out and working with modules and just some nice practices on organizing the code.</p>
<table><thead><tr><th>Command</th><th>Description</th></tr></thead><tbody><tr><td style='text-align: left;'><code>$ todo select &lt;listnumber&gt;</code></td><td style='text-align: left;'>Makes specific list active so more actions can be taken</td>
</tr><tr><td style='text-align: left;'><code>$ todo rename &quot;&lt;new name&gt;&quot;</code></td><td style='text-align: left;'>Rename currently selected list</td>
</tr><tr><td style='text-align: left;'><code>$ todo add &quot;&lt;my todo item&gt;&quot;</code></td><td style='text-align: left;'>Adds todo to currently selected list</td>
</tr><tr><td style='text-align: left;'><code>$ todo clear</code></td><td style='text-align: left;'>Clears out currently selected list.</td>
</tr><tr><td style='text-align: left;'><code>$ todo copy</code></td><td style='text-align: left;'>Copies current list in a pretty format to the buffer that can be pasted</td>
</tr></tbody></table>
<p>Lastly, there&#8217;s a <a href='https://github.com/vesln/todo/pull/6'>pull request</a> opened to enable multiple lists that moves the data directory to <code>$HOME</code> and also maps an options/command list that reuses the original functions. I like that but want my api a little different so will implement that as well.</p>
            

            <!-- if tags -->
            
            <ul class="tags">
                 
                <li><a href="/tags/todo">todo</a></li>
                 
                <li><a href="/tags/command line">command line</a></li>
                 
                <li><a href="/tags/cli">cli</a></li>
                 
                <li><a href="/tags/node.js">node.js</a></li>
                 
                <li><a href="/tags/terminal">terminal</a></li>
                 
                <li><a href="/tags/bash">bash</a></li>
                 
                <li><a href="/tags/script">script</a></li>
                
            </ul>  
            
            <!-- endif -->
        </div><!--end body-->
    </div><!--end content-->
    <div class="clear"></div>
</div><!--end post-->




<div class="post">
    <div class="content">
        <div class="title"><h3><a href="/2012/11/30/grooveshark-api-format">Grooveshark api format</a></h3></div>

        <div class="meta">
            <span class="date">Nov 30, 2012</span>
        </div>

        <div class="body-post">
            
                <h1 id='finally'>Finally!</h1>

<p>Finally figured out the darn formatting needed for Grooveshark. Either I need a better visual or just need to learn how to read better, but here&#8217;s an example in case anyone needs it with some steps to produce</p>

<h1 id='json_payload_to_start_a_session'>JSON Payload to start a session</h1>
<div class='highlight'><pre><code class='js'><span class='c1'>// to start a session</span>
<span class='p'>{</span>
    <span class='s2'>&quot;method&quot;</span><span class='o'>:</span> <span class='s2'>&quot;startSession&quot;</span><span class='p'>,</span>
    <span class='s2'>&quot;parameters&quot;</span><span class='o'>:</span> <span class='p'>{},</span>
    <span class='s2'>&quot;header&quot;</span><span class='o'>:</span> <span class='p'>{</span>
        <span class='s2'>&quot;wsKey&quot;</span><span class='o'>:</span> <span class='s2'>&quot;uniquekeyfromgrooveshark&quot;</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre>
</div>
<h2 id='command_line'>Command line</h2>

<p>Then from the command line, where <em>sig</em> is a hash string created from an <strong>hmac</strong> function using:</p>

<ul>
<li>unique <em>secret</em> provided by Grooveshark upon <a href='http://developer.grooveshark.com/api'>api credentials request</a></li>

<li><em>JSON payload</em> above</li>

<li>set to <em>md5</em> format</li>

<li>digest is <em>hex</em></li>
</ul>

<p>Make sure this is all on one line</p>

<p><code>$ curl -X POST https://api.grooveshark.com/ws3.php?sig=123cc3d7f0f56c201e2b251eb888abc \</code> -d &#8216;{&#8220;method&#8221;: &#8220;startSession&#8221;,&#8221;parameters&#8221;: {},&#8221;header&#8221;: {&#8220;wsKey&#8221;: &#8220;uniquekeyfromgrooveshark&#8221;}}&#8217;</p>

<p>Sample <strong>hmac</strong> function using node.js:</p>
<div class='highlight'><pre><code class='js'><span class='kd'>var</span> <span class='nx'>crypto</span> <span class='o'>=</span> <span class='nx'>require</span><span class='p'>(</span><span class='s1'>&#39;crypto&#39;</span><span class='p'>)</span>
  <span class='c1'>// refer to payload format above</span>
  <span class='p'>,</span> <span class='nx'>payload</span> <span class='o'>=</span> <span class='s1'>&#39;{&quot;method&quot;:&quot;startSession&quot;, ...&#39;</span>
  <span class='p'>,</span> <span class='nx'>secret</span> <span class='o'>=</span> <span class='s1'>&#39;abcdeg&#39;</span>
  <span class='p'>,</span> <span class='nx'>hash</span>
  <span class='p'>;</span>

<span class='nx'>hash</span> <span class='o'>=</span> <span class='nx'>crypto</span><span class='p'>.</span><span class='nx'>createHmac</span><span class='p'>(</span><span class='s1'>&#39;md5&#39;</span><span class='p'>,</span> <span class='nx'>secret</span><span class='p'>).</span><span class='nx'>update</span><span class='p'>(</span><span class='nx'>payload</span><span class='p'>).</span><span class='nx'>digest</span><span class='p'>(</span><span class='s1'>&#39;hex&#39;</span><span class='p'>);</span>
<span class='k'>return</span> <span class='nx'>hash</span><span class='p'>;</span>
</code></pre>
</div>
<h2 id='response_from_curl_request'>Response from curl request</h2>
<div class='highlight'><pre><code class='js'><span class='c1'>// then cache/reuse this sessionID for future</span>
<span class='p'>{</span>
    <span class='s2'>&quot;header&quot;</span><span class='o'>:</span> <span class='p'>{</span>
        <span class='s2'>&quot;hostname&quot;</span><span class='o'>:</span> <span class='s2'>&quot;someStringABC123&quot;</span>
    <span class='p'>},</span>
    <span class='s2'>&quot;result&quot;</span><span class='o'>:</span> <span class='p'>{</span>
        <span class='s2'>&quot;success&quot;</span><span class='o'>:</span> <span class='kc'>true</span><span class='p'>,</span>
        <span class='s2'>&quot;sessionID&quot;</span><span class='o'>:</span> <span class='s2'>&quot;777efa594291a1f4d804cb7192abc123&quot;</span>
    <span class='p'>}</span>
<span class='p'>}</span>
</code></pre>
</div>
<p>Hope this can help someone.</p>
            

            <!-- if tags -->
            
            <ul class="tags">
                 
                <li><a href="/tags/grooveshark">grooveshark</a></li>
                 
                <li><a href="/tags/api">api</a></li>
                 
                <li><a href="/tags/json">json</a></li>
                
            </ul>  
            
            <!-- endif -->
        </div><!--end body-->
    </div><!--end content-->
    <div class="clear"></div>
</div><!--end post-->





<!-- Pagination links -->
<div class="pagination">
	<ul>
	    
		   
			   <a href="/page5">
			   
				  << Newer posts
			   </a>
		   </li>
	    


	    
	    <li class="next">
		    <a href="/page7">
			   Older posts >>
		    </a>
		</li>
	    
	</ul>
</div>


    </div>    
</div>


  </div>

  <script type="text/javascript" charset="utf-8" src="/assets/themes/tom/js/app.js">
      
  </script>

  

</body>
</html>

